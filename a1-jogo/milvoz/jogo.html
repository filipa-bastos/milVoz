<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>
            Milvoz
        </title>
        <script src="ElementosJogo.js"></script>
        <style>
            body{
                background-color: #111111;
            }

            #recursos {
                display: none;
            }
    
            #tela {
                display: block;
                background-color: aquamarine;
                /*background-color: #111111;*/
                position: fixed;
                top: calc(50vh - 400px);
                right: calc(50vw - 700px);
                /*width: 100vw;
                height: 100vh;*/
            }
        </style>
    </head>
    <body>
        <canvas id="tela" width="1400" height="800">O seu <em>browser</em> não suporta o elemento
            <code>canvas</code>!
        </canvas>

        <div id="recursos">
            <!--todos is recursos aqui-->
            <!--
                exemplo:

            <img id="avacinco" class="jogador" src="recursos/ava5.png">
            <img id="avaseis" class="jogador" src="recursos/ava6.png">
            <audio id="musicafundo" src="recursos/daft-punk-the-game-of-love-official-audio.mp3">O seu <em>browser</em> não suporta o elemento
                <code>audio</code>!
            </audio>

            -->

            <img id="capainicio" class="capaini" src="recursos/avas/capa1.jpg">
            <img id="capahelp" class="capahelp" src="recursos/avas/fundohelp.jpg">
            <img id="logomilvoz" class="logomilvoz" src="recursos/avas/logo.png">
            <img id="letrasmilvoz" class="letrasmilvoz" src="recursos/avas/letrasmilvoz.png">
            <img id="letrasjogar" class="letrasjogar" src="recursos/avas/letrasjogar.png">
            <img id="letrascomojogar" class="letrascomojogar" src="recursos/avas/letrascomojogar.png">
            <img id="muteico" src="recursos/muteicon.png">
            <img id="setaback" src="recursos/setaesq.png">
            <img id="fundojogo" src="recursos/fundosjogo/fundo1.jpg">
            <img id="personagem" src="recursos/peronagem.png">
            <img id="arvoreum" src="recursos/positivos/Acacia_Sapling_JE7_BE2.png">
            <img id="arvoredois" src="recursos/positivos/Birch_Sapling_JE7_BE2.png">
            <img id="arvoretres" src="recursos/positivos/Dark_Oak_Sapling_JE7_BE2.png">
            <img id="arvorequatro" src="recursos/positivos/Jungle_Sapling_JE7_BE2.png">
            <img id="arvorecinco" src="recursos/positivos/Oak_Sapling_JE13.png">
            <img id="arvoreseis" src="recursos/positivos/Spruce_Sapling_JE7_BE2.png">
            <img id="animalum" src="recursos/positivos/esquilo1.png">
            <img id="animaldois" src="recursos/positivos/unnamed1.png">




        </div>
        <script>

            //variaveis
            var tela;
            var contexto;

            var racioX;
            var racioY;

            var ratoX;
            var ratoY;

            var fundo;
            var fundohelp;
            var logomilvoz;
            var letrasmilvoz;
            var letrasjogar;
            var letrascomojogar;
            var muteico;
            var setaback;

            var fundojogo;
            var personagem;
            var contador;
            var contadora;

            var arvoreum;
            var arvoredois;
            var arvoretres;
            var arvorequatro;
            var arvorecinco;
            var arvoreseis;
            var animalum;
            var animaldois;

            var natureza;
            var naturezaa;

            var paginaatual;

            //funcao iniciar - declarar valor variaveis / passar vars para arrays / textos / primeira funcao

            function inicia(){
                tela = new Tela(document.getElementById("tela"));
                contexto = tela.contexto;
                fundo = new Rectangulo(0, 0, tela.largura, tela.altura, "lightblue");

                fundo = document.getElementById("capainicio");
                fundohelp = document.getElementById("capahelp");
                logomilvoz = document.getElementById("logomilvoz");
                letrasmilvoz = document.getElementById("letrasmilvoz");
                letrasjogar = document.getElementById("letrasjogar");
                letrascomojogar = document.getElementById("letrascomojogar");
                muteico = document.getElementById("muteico");
                setaback = document.getElementById("setaback");
                fundojogo = document.getElementById("fundojogo");
                personagem = document.getElementById("personagem");
                continua = true;
                joggg = new Imagem(668, 650, personagem);
                contador = 0;
                contadora = new Texto(250, 25, "contador: " + contador, "white", "black", 2);
                contadora.tamanho = 32;
                naturezaa = new Texto(950, 25, "contador: " + natureza, "white", "black", 2);
                naturezaa.tamanho = 32;

                ratoX = 0;
                ratoY = 0;

                racioX = tela.largura / tela.larguraFinal;
                racioY = tela.altura / tela.alturaFinal;

                arvoreum = document.getElementById("arvoreum");
                arvoredois = document.getElementById("arvoredois");
                arvoretres = document.getElementById("arvoretres");
                arvorequatro = document.getElementById("arvorequatro");
                arvorecinco = document.getElementById("arvorecinco");
                arvoreseis = document.getElementById("arvoreseis");
                animalum = document.getElementById("animalum");
                animaldois = document.getElementById("animaldois");

                natureza = 1;



                nivelelemum = 1;
                elemarvoreum = new Array();
                for (var i = 0; i < nivelelemum; i++) {
                    var elemarvore = new Imagem(0, 0, document.getElementById("arvoreum"));
                    elemarvore.x = Math.random() * tela.largura /*+ tela.largura*/;
                    elemarvore.y = (Math.random() * (tela.altura - elemarvore.altura))-tela.altura;
               
                    elemarvore.deltaY = 2;
                    elemarvoreum.push(elemarvore);
                }

                nivelelemdois = 1;
                elemarvoredoisarr = new Array();
                for (var i = 0; i < nivelelemdois; i++) {
                    var elemarvoredois = new Imagem(0, 0, document.getElementById("arvoredois"));
                    elemarvoredois.x = Math.random() * tela.largura /*+ tela.largura*/;
                    elemarvoredois.y = (Math.random() * (tela.altura - elemarvoredois.altura))-tela.altura;
               
                    elemarvoredois.deltaY = 2;
                    elemarvoredoisarr.push(elemarvoredois);
                }

                nivelelemtres = 1;
                elemarvoretresarr = new Array();
                for (var i = 0; i < nivelelemtres; i++) {
                    var elemarvoretres = new Imagem(0, 0, document.getElementById("arvoretres"));
                    elemarvoretres.x = Math.random() * tela.largura /*+ tela.largura*/;
                    elemarvoretres.y = (Math.random() * (tela.altura - elemarvoretres.altura))-tela.altura;
               
                    elemarvoretres.deltaY = 2;
                    elemarvoretresarr.push(elemarvoretres);
                }

                nivelelemquatro = 1;
                elemarvorequatroarr = new Array();
                for (var i = 0; i < nivelelemquatro; i++) {
                    var elemarvorequatro = new Imagem(0, 0, document.getElementById("arvorequatro"));
                    elemarvorequatro.x = Math.random() * tela.largura /*+ tela.largura*/;
                    elemarvorequatro.y = (Math.random() * (tela.altura - elemarvorequatro.altura))-tela.altura;
               
                    elemarvorequatro.deltaY = 2;
                    elemarvorequatroarr.push(elemarvorequatro);
                }

                nivelelemcinco = 1;
                elemarvorecincoarr = new Array();
                for (var i = 0; i < nivelelemcinco; i++) {
                    var elemarvorecinco = new Imagem(0, 0, document.getElementById("arvorecinco"));
                    elemarvorecinco.x = Math.random() * tela.largura /*+ tela.largura*/;
                    elemarvorecinco.y = (Math.random() * (tela.altura - elemarvorecinco.altura))-tela.altura;
               
                    elemarvorecinco.deltaY = 2;
                    elemarvorecincoarr.push(elemarvorecinco);
                }

                nivelelemseis = 1;
                elemarvoreseisarr = new Array();
                for (var i = 0; i < nivelelemseis; i++) {
                    var elemarvoreseis = new Imagem(0, 0, document.getElementById("arvoreseis"));
                    elemarvoreseis.x = Math.random() * tela.largura /*+ tela.largura*/;
                    elemarvoreseis.y = (Math.random() * (tela.altura - elemarvoreseis.altura))-tela.altura;
               
                    elemarvoreseis.deltaY = 2;
                    elemarvoreseisarr.push(elemarvoreseis);
                }
                /*------------animais----------------*/
                nivelanimum = 1;
                elemanimumarr = new Array();
                for (var i = 0; i < nivelanimum; i++) {
                    var elemanimum = new Imagem(0, 0, document.getElementById("animaldois"));
                    elemanimum.x = Math.random() * tela.largura /*+ tela.largura*/;
                    elemanimum.y = (Math.random() * (tela.altura - elemanimum.altura))-tela.altura;
               
                    elemanimum.deltaY = 2;
                    elemanimumarr.push(elemanimum);
                }

                nivelanimdois = 1;
                elemanimdoisarr = new Array();
                for (var i = 0; i < nivelanimdois; i++) {
                    var elemanimdois = new Imagem(0, 0, document.getElementById("animalum"));
                    elemanimdois.x = Math.random() * tela.largura /*+ tela.largura*/;
                    elemanimdois.y = (Math.random() * (tela.altura - elemanimdois.altura))-tela.altura;
               
                    elemanimdois.deltaY = 2;
                    elemanimdoisarr.push(elemanimdois);
                }














                menuprincipal();
            }
            //-------------------------------menu iniciar-----------------------------

            function menuprincipal(){
                paginaatual = "menuprincipal";
                var d = document.getElementById("tela");
                contexto.clearRect(0, 0, d.width, d.height);
                contexto.beginPath();
                contexto.drawImage(fundo, 0, 0, 1400, 800);
                contexto.drawImage(logomilvoz, 621, 90, 157, 179);
                contexto.drawImage(letrasmilvoz, 614, 280, 173, 48);
                contexto.drawImage(letrasjogar, 470, 730, 130, 40);
                contexto.drawImage(letrascomojogar, 800, 730, 230, 40);
                contexto.drawImage(muteico, 1340, 10, 50, 50);
            }   


            //-------------------------------menu help-----------------------------
            function menuhelp(){
                paginaatual = "menuhelp";
                var c = document.getElementById("tela");
                contexto.clearRect(0, 0, c.width, c.height);
                contexto.beginPath();
                contexto.drawImage(fundohelp, 0, 0, 1400, 800);
                contexto.drawImage(muteico, 1340, 10, 50, 50);
                contexto.drawImage(setaback, 15, 15, 40, 40);
            }


            //-------------------------------jogo -----------------------------
            function jogar(){
                paginaatual = "jogo";
                var c = document.getElementById("tela");
                contexto.clearRect(0, 0, c.width, c.height);
                contexto.beginPath();
                contexto.drawImage(fundojogo, 0, 0, 1400, 800);
                contexto.drawImage(muteico, 1340, 10, 50, 50);
                contexto.drawImage(setaback, 15, 15, 40, 40);
                contexto.drawImage(logomilvoz, 621, 10, 45, 50);
                contexto.drawImage(letrasmilvoz, 680, 20, 120, 30);

                
                contadora.texto = "contador: " + contador;
                contadora.desenha(tela);
                naturezaa.texto = "Natureza: " + natureza;
                naturezaa.desenha(tela);



                for (var i = 0; i < elemarvoreum.length; i++) {
                    elemarvoreum[i].desenha(tela);
                    if (elemarvoreum[i].y > tela.altura) {
                        elemarvoreum[i].y = 0-elemarvoreum[i].altura;
                        elemarvoreum[i].x = Math.random() * tela.largura;
                        elemarvoreum[i].visivel = true;
                        elemarvoreum[i].activo = true;
                    }
                    if (elemarvoreum[i].colide(joggg)) {
                        natureza++
                        //console.log(natureza);
                        elemarvoreum[i].visivel = false;
                        elemarvoreum[i].activo = false;
                    }
                }
                
                for (var i = 0; i < elemarvoredoisarr.length; i++) {
                    elemarvoredoisarr[i].desenha(tela);
                    if (elemarvoredoisarr[i].y > tela.altura) {
                        elemarvoredoisarr[i].y = 0-elemarvoredoisarr[i].altura;
                        elemarvoredoisarr[i].x = Math.random() * tela.largura;
                        elemarvoredoisarr[i].visivel = true;
                        elemarvoredoisarr[i].activo = true;
                    }
                    if (elemarvoredoisarr[i].colide(joggg)) {
                        natureza++
                        //console.log(natureza);
                        elemarvoredoisarr[i].visivel = false;
                        elemarvoredoisarr[i].activo = false;
                    }
                }
                
                for (var i = 0; i < elemarvoretresarr.length; i++) {
                    elemarvoretresarr[i].desenha(tela);
                    if (elemarvoretresarr[i].y > tela.altura) {
                        elemarvoretresarr[i].y = 0-elemarvoretresarr[i].altura;
                        elemarvoretresarr[i].x = Math.random() * tela.largura;
                        elemarvoretresarr[i].visivel = true;
                        elemarvoretresarr[i].activo = true;
                    }
                    if (elemarvoretresarr[i].colide(joggg)) {
                        natureza++
                        //console.log(natureza);
                        elemarvoretresarr[i].visivel = false;
                        elemarvoretresarr[i].activo = false;
                    }
                }
                
                for (var i = 0; i < elemarvorequatroarr.length; i++) {
                    elemarvorequatroarr[i].desenha(tela);
                    if (elemarvorequatroarr[i].y > tela.altura) {
                        elemarvorequatroarr[i].y = 0-elemarvorequatroarr[i].altura;
                        elemarvorequatroarr[i].x = Math.random() * tela.largura;
                        elemarvorequatroarr[i].visivel = true;
                        elemarvorequatroarr[i].activo = true;
                    }
                    if (elemarvorequatroarr[i].colide(joggg)) {
                        natureza++
                        //console.log(natureza);
                        elemarvorequatroarr[i].visivel = false;
                        elemarvorequatroarr[i].activo = false;
                    }
                }
                
                for (var i = 0; i < elemarvorecincoarr.length; i++) {
                    elemarvorecincoarr[i].desenha(tela);
                    if (elemarvorecincoarr[i].y > tela.altura) {
                        elemarvorecincoarr[i].y = 0-elemarvorecincoarr[i].altura;
                        elemarvorecincoarr[i].x = Math.random() * tela.largura;
                        elemarvorecincoarr[i].visivel = true;
                        elemarvorecincoarr[i].activo = true;
                    }
                    if (elemarvorecincoarr[i].colide(joggg)) {
                        natureza++
                        //console.log(natureza);
                        elemarvorecincoarr[i].visivel = false;
                        elemarvorecincoarr[i].activo = false;
                    }
                }
                
                for (var i = 0; i < elemarvoreseisarr.length; i++) {
                    elemarvoreseisarr[i].desenha(tela);
                    if (elemarvoreseisarr[i].y > tela.altura) {
                        elemarvoreseisarr[i].y = 0-elemarvoreseisarr[i].altura;
                        elemarvoreseisarr[i].x = Math.random() * tela.largura;
                        elemarvoreseisarr[i].visivel = true;
                        elemarvoreseisarr[i].activo = true;
                    }
                    if (elemarvoreseisarr[i].colide(joggg)) {
                        natureza++
                        //console.log(natureza);
                        elemarvoreseisarr[i].visivel = false;
                        elemarvoreseisarr[i].activo = false;
                    }
                }

                /*---------------animais----------------*/
                
                for (var i = 0; i < elemanimumarr.length; i++) {
                    elemanimumarr[i].desenha(tela);
                    if (elemanimumarr[i].y > tela.altura) {
                        elemanimumarr[i].y = 0-elemanimumarr[i].altura;
                        elemanimumarr[i].x = Math.random() * tela.largura;
                        elemanimumarr[i].visivel = true;
                        elemanimumarr[i].activo = true;
                    }
                    if (elemanimumarr[i].colide(joggg)) {
                        natureza++
                        //console.log(natureza);
                        elemanimumarr[i].visivel = false;
                        elemanimumarr[i].activo = false;
                    }
                }
                
                for (var i = 0; i < elemanimdoisarr.length; i++) {
                    elemanimdoisarr[i].desenha(tela);
                    if (elemanimdoisarr[i].y > tela.altura) {
                        elemanimdoisarr[i].y = 0-elemanimdoisarr[i].altura;
                        elemanimdoisarr[i].x = Math.random() * tela.largura;
                        elemanimdoisarr[i].visivel = true;
                        elemanimdoisarr[i].activo = true;
                    }
                    if (elemanimdoisarr[i].colide(joggg)) {
                        natureza++
                        //console.log(natureza);
                        elemanimdoisarr[i].visivel = false;
                        elemanimdoisarr[i].activo = false;
                    }
                }
                
                

                //contexto.drawImage(personagem, 668, 650, 65, 100);
                joggg.desenha(tela);

                

                if (continua) {
                    contador++;
                    window.requestAnimationFrame(jogar);
                }
            }


            //------rato clique
            function getMousePosition(canvas, event) {
                let rect = canvas.getBoundingClientRect();
                let x = event.clientX - rect.left;
                let y = event.clientY - rect.top;
                clicou(x, y);
            }
            let canvasElem = document.querySelector("canvas");
            canvasElem.addEventListener("mousedown", function(e)
            {
                getMousePosition(canvasElem, e);
            });
            function clicou(x, y){
                if(paginaatual == "menuprincipal"){//se ta no menu principal
                    if(x>470 && x<600 && y>730 && y<770){//carregar jogar
                        //alert("carregou no jogar")
                        jogar();
                    }
                    if(x>800 && x<1030 && y>730 && y<770){//carregar nas instrucoes
                        //alert("carregou instrucoes")
                        menuhelp();
                    }
                }
                if(paginaatual == "menuhelp"){//se ta no menu HELP
                    if(x>15 && x<55 && y>15 && y<55){//carregar voltar para tras
                        //alert("carregou no jogar")
                        menuprincipal();
                    }
                }
                if(paginaatual == "jogo"){//se ta no menu HELP
                    if(x>15 && x<55 && y>15 && y<55){//carregar voltar para tras
                        //alert("carregou no jogar")
                        menuprincipal();
                    }
                }
            }




            //rato - teclado - janela iniciada

            function processaTeclaPremida(tecla) {
                if (tecla.keyCode == 49) {  // num1
                    menuprincipal()
                }
                if (tecla.keyCode == 50) {  // num2
                    jogar()
                }
                if (tecla.keyCode == 51) {  // num3
                    menuhelp()
                }
                if (tecla.keyCode == 39) {  // seta lado direito
                    if(paginaatual == "jogo"){//se ta no jogo
                       if(joggg.x+joggg.largura < 1400 - 6){
                        joggg.deltaX = +6;
                       }
                    }
                }
                if (tecla.keyCode == 37) {  // seta lado esquerdo
                    if(paginaatual == "jogo"){//se ta no jogo
                       if(joggg.x > 6){
                        joggg.deltaX = -6;
                        //console.log(joggg.x)
                       }
                    }
                }
            }

            function processaTeclaLibertada(tecla) {
                if ((tecla.keyCode == 39) || (tecla.keyCode == 37)) { /*setas lados parar*/
                    joggg.deltaX = 0;
                    //...
                }
            }

            window.onkeydown = processaTeclaPremida;
            window.onkeyup = processaTeclaLibertada;






            //arrancar inicio jogo
            window.onload = function () {
                inicia();
                
            };

        </script>
 
    </body>
</html>